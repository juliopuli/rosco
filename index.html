<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pasapalabra Multiplayer - Rotativo</title>
    <style>
        body { 
            background-color: #050a1f; color: white; font-family: Arial, sans-serif; 
            display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px;
        }
        .titulo { font-size: 2.5rem; color: #ffcc00; text-shadow: 0 0 10px #ffcc00; margin-bottom: 20px; }
        
        /* MENÚS */
        .menu-box { text-align: center; background: #111b3d; padding: 30px; border-radius: 20px; border: 1px solid #2a3a6d; }
        .btn { 
            display: block; width: 200px; padding: 15px; margin: 10px auto; 
            border-radius: 50px; border: none; font-weight: bold; cursor: pointer; font-size: 1rem;
        }
        .btn-green { background: #2ecc71; color: white; }
        .btn-blue { background: #3498db; color: white; }
        
        /* JUEGO: DOS ROSCOS */
        #pantalla-juego { display: none; width: 100%; max-width: 1200px; }
        .sala-header { color: #ffcc00; font-size: 1.5rem; font-weight: bold; margin-bottom: 20px; text-align: center; width: 100%; }
        
        .juego-flex { display: flex; justify-content: space-around; align-items: flex-start; gap: 20px; flex-wrap: wrap; }
        
        .jugador-seccion { display: flex; flex-direction: column; align-items: center; width: 450px; }
        .rosco-container { position: relative; width: 300px; height: 300px; margin-bottom: 20px; }
        
        .letra { 
            position: absolute; width: 30px; height: 30px; background: #0044ff; 
            border-radius: 50%; display: flex; justify-content: center; align-items: center; 
            font-weight: bold; font-size: 12px; border: 1px solid white; 
        }
        .letra.activa { box-shadow: 0 0 15px #ffcc00; border: 2px solid #ffcc00; }
        .letra.correcta { background: #28a745; }
        .letra.incorrecta { background: #dc3545; }

        .panel-pregunta { background: #111b3d; padding: 20px; border-radius: 15px; width: 100%; text-align: center; border: 1px solid #2a3a6d; }
        input { width: 80%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; text-align: center; }
        
        .oculto { display: none; }
    </style>
</head>
<body>

    <h1 class="titulo">PASAPALABRA</h1>

    <div id="menu-principal" class="menu-box">
        <button class="btn btn-green" onclick="iniciarModo('local')">MODO LOCAL</button>
        <button class="btn btn-blue" onclick="mostrarMenuOnline()">MODO ONLINE</button>
    </div>

    <div id="menu-online" class="menu-box oculto">
        <button class="btn btn-blue" onclick="generarSala()">GENERAR CÓDIGO</button>
        <p>— O —</p>
        <input type="text" id="input-codigo" placeholder="Introduce código" maxlength="6" style="width:150px">
        <button class="btn btn-green" onclick="unirseSala()">UNIRSE</button>
        <button class="btn" style="background:gray" onclick="location.reload()">VOLVER</button>
    </div>

    <div id="pantalla-juego">
        <div id="codigo-sala-display" class="sala-header"></div>
        
        <div class="juego-flex">
            <div class="jugador-seccion" id="sec-j1">
                <h3 style="color:#2ecc71">JUGADOR 1</h3>
                <div id="rosco-j1" class="rosco-container"></div>
                <div class="panel-pregunta">
                    <div id="preg-j1"><b>CON LA A:</b> Cargando...</div>
                    <input type="text" id="ans-j1" placeholder="Respuesta...">
                    <div style="display:flex; gap:5px">
                        <button class="btn btn-green" onclick="validar(1)">ENVIAR</button>
                        <button class="btn btn-blue" style="background:#f1c40f; color:black" onclick="pasar(1)">PASO</button>
                    </div>
                </div>
            </div>

            <div class="jugador-seccion" id="sec-j2">
                <h3 style="color:#3498db">JUGADOR 2</h3>
                <div id="rosco-j2" class="rosco-container"></div>
                <div class="panel-pregunta">
                    <div id="preg-j2"><b>CON LA A:</b> Cargando...</div>
                    <input type="text" id="ans-j2" placeholder="Respuesta...">
                    <div style="display:flex; gap:5px">
                        <button class="btn btn-green" onclick="validar(2)">ENVIAR</button>
                        <button class="btn btn-blue" style="background:#f1c40f; color:black" onclick="pasar(2)">PASO</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Banco extendido para que las preguntas roten
        const poolPreguntas = {
            "A": [{p:"Relativo a las abejas", r:"apícola"}, {p:"Árbol que da bellotas", r:"alcornoque"}],
            "B": [{p:"Instrumento para el viento", r:"veleta"}, {p:"Embarcación de vela", r:"balandra"}],
            "C": [{p:"Cabeza de la ciudad", r:"capital"}, {p:"Vehículo de carga", r:"camión"}],
            "D": [{p:"Número después del nueve", r:"diez"}, {p:"Animal marino inteligente", r:"delfín"}],
            "E": [{p:"Relativo a las estrellas", r:"estelar"}, {p:"Lugar de elefantes", r:"elefantería"}],
            // ... (Añadir el resto de letras siguiendo este patrón)
            "Z": [{p:"Calzado para el pie", r:"zapato"}, {p:"Animal muy astuto", r:"zorro"}]
        };

        const letras = ["A","B","C","D","E","Z"]; // Simplificado para el ejemplo, añadir todas
        let estado = {
            j1: { indice: 0, preguntas: [], aciertos: [] },
            j2: { indice: 0, preguntas: [], aciertos: [] }
        };

        function mostrarMenuOnline() {
            document.getElementById('menu-principal').classList.add('oculto');
            document.getElementById('menu-online').classList.remove('oculto');
        }

        function generarSala() {
            const codigo = Math.floor(100000 + Math.random() * 900000);
            iniciarJuego("SALA: " + codigo);
        }

        function unirseSala() {
            const cod = document.getElementById('input-codigo').value;
            if(cod.length < 4) return alert("Código inválido");
            iniciarJuego("SALA: " + cod);
        }

        function iniciarModo(modo) {
            iniciarJuego(modo === 'local' ? "MODO LOCAL" : "");
        }

        function iniciarJuego(textoHeader) {
            document.getElementById('menu-principal').classList.add('oculto');
            document.getElementById('menu-online').classList.add('oculto');
            document.getElementById('pantalla-juego').style.display = 'block';
            document.getElementById('codigo-sala-display').innerText = textoHeader;
            
            // Cargar preguntas aleatorias para cada jugador
            estado.j1.preguntas = letras.map(l => ({letra: l, ...poolPreguntas[l][Math.floor(Math.random() * poolPreguntas[l].length)]}));
            estado.j2.preguntas = letras.map(l => ({letra: l, ...poolPreguntas[l][Math.floor(Math.random() * poolPreguntas[l].length)]}));
            
            dibujarRosco(1);
            dibujarRosco(2);
            actualizarPregunta(1);
            actualizarPregunta(2);
        }

        function dibujarRosco(num) {
            const container = document.getElementById('rosco-j'+num);
            container.innerHTML = "";
            const total = letras.length;
            letras.forEach((l, i) => {
                const div = document.createElement('div');
                div.className = 'letra';
                div.id = `L${num}-${i}`;
                div.innerText = l;
                const ang = (i * 360 / total) - 90;
                const x = 130 * Math.cos(ang * Math.PI / 180);
                const y = 130 * Math.sin(ang * Math.PI / 180);
                div.style.left = `calc(50% + ${x}px - 15px)`;
                div.style.top = `calc(50% + ${y}px - 15px)`;
                container.appendChild(div);
            });
        }

        function actualizarPregunta(num) {
            const p = estado['j'+num];
            const item = p.preguntas[p.indice];
            document.getElementById(`preg-j${num}`).innerHTML = `<b>CON LA ${item.letra}:</b> ${item.p}`;
            document.querySelectorAll(`#rosco-j${num} .letra`).forEach(el => el.classList.remove('activa'));
            document.getElementById(`L${num}-${p.indice}`).classList.add('activa');
        }

        function validar(num) {
            const p = estado['j'+num];
            const input = document.getElementById(`ans-j${num}`);
            const correcta = p.preguntas[p.indice].r.toLowerCase();
            const el = document.getElementById(`L${num}-${p.indice}`);
            
            if(input.value.toLowerCase().trim() === correcta) el.classList.add('correcta');
            else el.classList.add('incorrecta');
            
            input.value = "";
            p.indice = (p.indice + 1) % letras.length;
            actualizarPregunta(num);
        }

        function pasar(num) {
            const p = estado['j'+num];
            p.indice = (p.indice + 1) % letras.length;
            actualizarPregunta(num);
        }
    </script>
</body>
</html>
