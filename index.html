<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasapalabra Pro: Virus Style</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Roboto:wght@400;700&display=swap');

        :root {
            --bg-dark: #070f1a; /* Color de fondo oscuro estilo Virus */
            --orange-glow: #ff7b00;
            --blue-glow: #00aeff;
            --btn-dark: #0f1d2e;
            --text-white: #ffffff;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-dark);
            color: var(--text-white);
            font-family: 'Roboto', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-image: radial-gradient(circle at 50% 50%, #112240 0%, #050a12 100%);
        }

        /* T√çTULO ESTILO "JUEGO VIRUS" PERO PASAPALABRA */
        .main-title {
            font-family: 'Fredoka', sans-serif;
            font-size: 4rem;
            line-height: 1;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(0, 174, 255, 0.5);
        }
        .title-top { color: white; display: block; }
        .title-bottom { color: var(--orange-glow); display: block; text-shadow: 0 0 20px var(--orange-glow); }

        /* CONTENEDOR PRINCIPAL CON BORDE NARANJA */
        .menu-container {
            width: 90%;
            max-width: 400px;
            padding: 40px 20px;
            border: 2px solid var(--orange-glow);
            border-radius: 30px;
            background: rgba(15, 29, 46, 0.6);
            backdrop-filter: blur(5px);
            box-shadow: 0 0 30px rgba(255, 123, 0, 0.2), inset 0 0 20px rgba(255, 123, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        /* BOTONES ESTILO IMAGEN */
        .btn {
            width: 100%;
            padding: 18px;
            border-radius: 50px; /* Bordes muy redondos */
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-family: 'Roboto', sans-serif;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
        }

        .btn:active { transform: scale(0.98); }

        /* Bot√≥n Superadmin (Dark Outline) */
        .btn-outline {
            background: transparent;
            border: 2px solid #2c3e50;
            color: #ecf0f1;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .btn-outline:hover { border-color: var(--blue-glow); color: var(--blue-glow); }

        /* Bot√≥n Jugar (Naranja S√≥lido) */
        .btn-orange {
            background: linear-gradient(180deg, #ff9500 0%, #d35400 100%);
            color: white;
            box-shadow: 0 5px 20px rgba(211, 84, 0, 0.4);
            border: 1px solid #e67e22;
        }
        .btn-orange:hover { filter: brightness(1.1); }

        /* Bot√≥n C√≥mo Jugar (Azul S√≥lido) */
        .btn-blue {
            background: linear-gradient(180deg, #3498db 0%, #2980b9 100%);
            color: white;
            box-shadow: 0 5px 20px rgba(41, 128, 185, 0.4);
            border: 1px solid #3498db;
        }

        /* INPUT OCULTO ELEGANTE PARA EL NOMBRE */
        #user-input {
            background: rgba(0,0,0,0.3);
            border: 1px solid #444;
            padding: 10px;
            border-radius: 10px;
            color: white;
            text-align: center;
            width: 80%;
            margin: 0 auto;
            font-size: 1rem;
            display: none; /* Se muestra al darle a jugar */
        }

        /* FOOTER PILL */
        .footer-pill {
            margin-top: 40px;
            border: 1px solid var(--blue-glow);
            padding: 10px 30px;
            border-radius: 50px;
            background: rgba(5, 10, 18, 0.8);
            color: white;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 0 15px rgba(0, 174, 255, 0.2);
        }

        /* PANTALLAS OCULTAS (Juego, Staff) */
        .hidden { display: none !important; }

        /* ESTILOS DEL JUEGO (ROSCO) */
        #game-screen {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: var(--bg-dark);
            z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .rosco-box { position: relative; width: 400px; height: 400px; margin-bottom: 20px; }
        .letra { 
            position: absolute; width: 35px; height: 35px; 
            background: radial-gradient(circle, #0055ff 0%, #002266 100%); 
            border: 2px solid white; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            font-weight: bold; font-size: 0.9rem; 
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .activa { background: var(--orange-glow); color: black; transform: scale(1.3); box-shadow: 0 0 20px var(--orange-glow); z-index: 10; border-color: black; }
        .correcta { background: #2ecc71 !important; }
        .fallada { background: #e74c3c !important; }

        /* HUD STAFF */
        #staff-overlay {
            position: fixed; top: 10px; right: 10px;
            background: rgba(0,0,0,0.9);
            border: 1px solid var(--orange-glow);
            padding: 10px 20px;
            border-radius: 10px;
            z-index: 2000;
            display: none;
            color: var(--orange-glow);
            font-weight: bold;
        }
        
        #mic-status { color: var(--orange-glow); font-size: 0.8rem; height: 20px; margin-top: 5px; }

    </style>
</head>
<body>

    <div id="staff-overlay">
        üëë SUPERADMIN: PABLO<br>
        <button onclick="location.reload()" style="background:red; color:white; border:none; padding:5px; margin-top:5px; cursor:pointer;">SALIR</button>
    </div>

    <div id="menu-screen">
        <div class="main-title">
            <span class="title-top">PASA</span>
            <span class="title-bottom">PALABRA</span>
        </div>

        <div class="menu-container">
            <button class="btn btn-outline" onclick="loginStaff()">
                SUPERADMIN
            </button>

            <input type="text" id="user-input" placeholder="Tu Nombre...">

            <button class="btn btn-orange" id="btn-play" onclick="prepararJuego()">
                üë§ JUGAR (LOCAL)
            </button>

            <button class="btn btn-blue" onclick="alert('Reglas: Responde a las definiciones de la A a la Z.\n\nPuedes usar el micr√≥fono para responder.')">
                üìò C√ìMO JUGAR
            </button>
        </div>

        <div class="footer-pill">
            ü§ñ powered by @pablo
        </div>
    </div>

    <div id="game-screen" class="hidden">
        <div class="rosco-box" id="rosco"></div>
        
        <div class="menu-container" style="max-width: 500px; padding: 20px;">
            <h2 id="letter-header" style="color:var(--orange-glow); margin:0; font-size:2rem;">CON LA A</h2>
            <p id="question-text" style="color:#ddd; min-height:60px;">Cargando pregunta...</p>
            
            <input type="text" id="game-answer" class="btn btn-outline" style="text-align:center; margin-bottom:10px; cursor:text;" placeholder="Escribe o habla...">
            
            <div id="mic-status"></div>

            <button class="btn btn-blue" onclick="activarVoz()">üé§ USAR MICRO</button>
            
            <div style="display:flex; gap:10px; width:100%; margin-top:10px;">
                <button class="btn btn-orange" onclick="checkAnswer()">ENVIAR</button>
                <button class="btn btn-outline" style="border-color:#e74c3c; color:#e74c3c;" onclick="pasapalabra()">PASAR</button>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURACI√ìN & DATOS ---
        const DB = [
            {l:"A", q:"Empieza por A: Persona que viaja al espacio.", r:"astronauta"},
            {l:"B", q:"Empieza por B: Recipiente para beber l√≠quidos.", r:"botella"},
            {l:"C", q:"Empieza por C: Mam√≠fero que relincha.", r:"caballo"},
            {l:"D", q:"Empieza por D: N√∫mero de dedos en una mano.", r:"cinco"}, // Trampa mental, empieza por C en realidad (Cinco). Cambiemos:
            {l:"D", q:"Empieza por D: Reptil extinguido.", r:"dinosaurio"},
            {l:"E", q:"Empieza por E: Animal gris con trompa.", r:"elefante"}
            // ... Se puede expandir
        ];
        
        let index = 0;
        let score = 0;
        let isStaff = false;
        const synth = window.speechSynthesis;
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const rec = new SpeechRecognition();
        rec.lang = 'es-ES';

        // --- L√ìGICA DEL MEN√ö ---

        function loginStaff() {
            // El comportamiento CL√ÅSICO que pediste
            const pass = prompt("INTRODUCE C√ìDIGO STAFF:");
            if(pass === "Pablo23sek") {
                isStaff = true;
                document.getElementById('staff-overlay').style.display = "block";
                alert("ACCESO CONCEDIDO: MODO SUPERADMIN");
                // Pre-rellenamos nombre
                document.getElementById('user-input').value = "PABLO";
                document.getElementById('user-input').style.display = "block";
                document.getElementById('btn-play').innerText = "üëë ENTRAR COMO STAFF";
            } else {
                alert("CONTRASE√ëA INCORRECTA");
            }
        }

        function prepararJuego() {
            const input = document.getElementById('user-input');
            // Si el input est√° oculto, lo mostramos primero
            if(input.style.display !== "block") {
                input.style.display = "block";
                document.getElementById('btn-play').innerText = "ACCEDER";
                return;
            }
            
            // Si ya est√° visible, validamos
            if(input.value.trim() === "") {
                alert("Por favor, pon tu nombre.");
                return;
            }

            startGame();
        }

        // --- L√ìGICA DEL JUEGO ---

        function startGame() {
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            renderRosco();
            loadQuestion();
        }

        function renderRosco() {
            const box = document.getElementById('rosco');
            box.innerHTML = "";
            const radius = 180;
            const total = DB.length; // Usamos la longitud real de la DB para el c√°lculo
            // Para dibujar el rosco completo visualmente (A-Z) aunque solo tengamos pocas preguntas,
            // normalmente necesitar√≠amos 27 divs. Aqu√≠ dibujaremos solo las que hay en DB para la demo.
            
            DB.forEach((item, i) => {
                const el = document.createElement('div');
                el.className = "letra";
                el.id = "L-" + i;
                el.innerText = item.l;
                
                // Matem√°ticas del c√≠rculo
                const angle = (i * (360 / total) - 90) * (Math.PI / 180);
                const x = Math.cos(angle) * radius + 200 - 17; // 200 centro, 17 mitad tama√±o
                const y = Math.sin(angle) * radius + 200 - 17;
                
                el.style.left = x + "px";
                el.style.top = y + "px";
                box.appendChild(el);
            });
        }

        function speak(text) {
            synth.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.lang = 'es-ES';
            synth.speak(u);
        }

        function loadQuestion() {
            if(index >= DB.length) {
                speak("Juego terminado. Puntuaci√≥n: " + score);
                alert("FIN DEL JUEGO. ACIERTOS: " + score);
                location.reload();
                return;
            }

            const data = DB[index];
            document.getElementById('letter-header').innerText = "CON LA " + data.l;
            document.getElementById('question-text').innerText = data.q;
            document.getElementById('game-answer').value = "";
            
            // Resaltar letra
            document.querySelectorAll('.letra').forEach(l => l.classList.remove('activa'));
            const currentLetra = document.getElementById("L-" + index);
            if(currentLetra) currentLetra.classList.add('activa');

            speak(data.q);
        }

        function checkAnswer() {
            const userAns = document.getElementById('game-answer').value.toLowerCase().trim();
            const correctAns = DB[index].r.toLowerCase();
            const el = document.getElementById("L-" + index);

            if(userAns === correctAns) {
                el.classList.add('correcta');
                speak("Correcto");
                score++;
            } else {
                el.classList.add('fallada');
                speak("Incorrecto, era " + correctAns);
            }
            index++;
            setTimeout(loadQuestion, 1500); // Pausa para o√≠r la respuesta
        }

        function pasapalabra() {
            speak("Pasapalabra");
            // En modo simple, pasapalabra salta la pregunta y la deja pendiente (aqu√≠ simplificado la marcamos como fallo visual moment√°neo o simplemente avanzamos)
            // Para mantenerlo simple, avanzamos.
            index++;
            loadQuestion();
        }

        // --- SISTEMA DE VOZ ---
        function activarVoz() {
            document.getElementById('mic-status').innerText = "üî¥ ESCUCHANDO...";
            rec.start();
        }

        rec.onresult = (event) => {
            const voz = event.results[0][0].transcript;
            document.getElementById('game-answer').value = voz;
            document.getElementById('mic-status').innerText = "";
            // Opcional: Auto-enviar
            // checkAnswer(); 
        };
        
        rec.onerror = () => {
            document.getElementById('mic-status').innerText = "‚ùå Error micro";
        };

    </script>
</body>
</html>
