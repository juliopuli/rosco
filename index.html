<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasapalabra Pro v3.9.0</title>
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="manifest" href="manifest.json">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        :root { --fondo: #050a1f; --panel: #111b3d; --oro: #ffcc00; --verde: #2ecc71; --rojo: #dc3545; --azul: #0044ff; }
        body { background: var(--fondo); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        .oculto { display: none !important; }

        .pantalla { text-align: center; background: var(--panel); padding: 35px; border-radius: 25px; border: 1px solid #2a3a6d; width: 90%; max-width: 380px; box-shadow: 0 20px 60px rgba(0,0,0,0.7); position: relative; }
        
        input { width: 85%; padding: 14px; margin: 10px 0; border-radius: 10px; border: none; font-size: 1rem; text-align: center; background: #e0e0e0; color: #111; font-weight: bold; }
        .btn { width: 100%; padding: 16px; margin: 10px 0; border-radius: 50px; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .btn-green { background: var(--verde); color: white; }
        .btn-red { background: var(--rojo); color: white; }
        .btn-blue { background: #3498db; color: white; }
        .btn-staff { background: #444; color: #aaa; font-size: 0.7rem; margin-top: 20px; }

        /* PANEL STAFF FLOTANTE */
        #panel-staff { display: none; position: fixed; top: 15px; right: 15px; background: rgba(0,0,0,0.95); border: 2px solid var(--oro); padding: 15px; border-radius: 15px; z-index: 1000; min-width: 180px; text-align: center; }
    </style>
</head>
<body>

    <div id="panel-staff">
        <b id="st-name">ADMIN</b><br>
        <small id="st-range" style="color:var(--oro)"></small>
        <hr style="border:0.5px solid #444;">
        <button id="btn-admin-action" class="oculto" style="width:100%; border-radius:5px; border:none; padding:8px; font-weight:bold; cursor:pointer;"></button>
    </div>

    <div id="p-entrada" class="pantalla">
        <h1 style="color:var(--oro); margin-bottom:5px;">PASAPALABRA</h1>
        <p>Introduce tu nombre para jugar</p>
        <input type="text" id="nombre-input" placeholder="Tu nombre...">
        <button class="btn btn-green" onclick="validarEntradaNormal()">ENTRAR</button>
    </div>

    <div id="p-denegado" class="pantalla oculto">
        <h1 style="color:var(--rojo); font-size: 3rem;">ðŸ”’</h1>
        <h2 style="color:var(--rojo);">SISTEMA BLOQUEADO</h2>
        <p>Acceso denegado por el Superadmin.</p>
        <button class="btn btn-staff" onclick="pedirCodigoStaff()">ACCESO STAFF</button>
    </div>

    <div id="p-menu" class="pantalla oculto">
        <h2 id="msg-bienvenida">HOLA</h2>
        <button class="btn btn-blue" onclick="alert('Modo Online...')">MODO ONLINE</button>
        <button class="btn btn-green" onclick="alert('Modo Local...')">MODO LOCAL</button>
        
        <button class="btn btn-staff" onclick="pedirCodigoStaff()">ACCESO STAFF</button>
    </div>

    <div id="p-login-staff" class="pantalla oculto">
        <h2 style="color:var(--oro)">LOGIN STAFF</h2>
        <div id="box-auth-staff">
            <input type="text" id="user-staff" placeholder="Usuario">
            <input type="password" id="pass-staff" placeholder="ContraseÃ±a">
            <button class="btn btn-green" onclick="verificarCredenciales()">ACCEDER</button>
        </div>
        <button class="btn btn-staff" onclick="location.reload()">VOLVER</button>
    </div>

<script>
    const CODIGO_MAESTRO = "Pablo23sek";
    const staffDB = {
        "pablo": { pass: "Pablo23sek", rango: "SUPERADMIN", super: true },
        "juliopuli": { pass: "juli26", rango: "ADMIN", super: false },
        "alvarito": { pass: "poki", rango: "VISUALIZADOR", super: false }
    };

    let bloqueado = localStorage.getItem('lockPasapalabra') === 'true';
    let miNombre = "";

    function validarEntradaNormal() {
        const n = document.getElementById('nombre-input').value.trim();
        if(n.length < 2) return alert("Nombre no vÃ¡lido");
        
        if(bloqueado) {
            document.getElementById('p-entrada').classList.add('oculto');
            document.getElementById('p-denegado').classList.remove('oculto');
        } else {
            miNombre = n;
            irMenu();
        }
    }

    function irMenu() {
        document.querySelectorAll('.pantalla').forEach(p => p.classList.add('oculto'));
        document.getElementById('p-menu').classList.remove('oculto');
        document.getElementById('msg-bienvenida').innerText = "HOLA, " + miNombre.toUpperCase();
    }

    function pedirCodigoStaff() {
        const codigo = prompt("Introduce el CÃ“DIGO STAFF para continuar:");
        if(codigo === CODIGO_MAESTRO) {
            document.querySelectorAll('.pantalla').forEach(p => p.classList.add('oculto'));
            document.getElementById('p-login-staff').classList.remove('oculto');
        } else if(codigo !== null) {
            alert("CÃ³digo incorrecto.");
        }
    }

    function verificarCredenciales() {
        const u = document.getElementById('user-staff').value.toLowerCase();
        const p = document.getElementById('pass-staff').value;

        if(staffDB[u] && staffDB[u].pass === p) {
            miNombre = u.toUpperCase();
            
            // Mostrar Panel Admin
            document.getElementById('panel-staff').style.display = "block";
            document.getElementById('st-name').innerText = miNombre;
            document.getElementById('st-range').innerText = staffDB[u].rango;
            
            const btn = document.getElementById('btn-admin-action');
            if(staffDB[u].super) {
                btn.classList.remove('oculto');
                btn.innerText = bloqueado ? "ðŸ”“ ABRIR JUEGO" : "ðŸ”’ CERRAR JUEGO";
                btn.className = bloqueado ? "btn-green" : "btn-red";
                btn.onclick = () => {
                    bloqueado = !bloqueado;
                    localStorage.setItem('lockPasapalabra', bloqueado);
                    alert(bloqueado ? "Juego Bloqueado" : "Juego Abierto");
                    location.reload();
                };
            }
            irMenu();
        } else {
            alert("Usuario o ContraseÃ±a incorrectos.");
        }
    }
</script>
</body>
</html>
