<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pasapalabra Final</title>
    <style>
        body { background-color: #050a1f; color: white; font-family: Arial; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .titulo { font-size: 3rem; color: #ffcc00; text-shadow: 0 0 10px #ffcc00; margin-bottom: 30px; }
        
        /* MENÚS */
        .pantalla { text-align: center; background: #111b3d; padding: 40px; border-radius: 20px; border: 1px solid #2a3a6d; width: 400px; }
        .btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border-radius: 50px; border: none; font-weight: bold; cursor: pointer; font-size: 1.1rem; text-transform: uppercase; }
        .btn-local { background: #2ecc71; color: white; }
        .btn-online { background: #3498db; color: white; }
        input.cod-input { width: 80%; padding: 15px; margin: 10px 0; border-radius: 10px; text-align: center; font-size: 1.2rem; }

        /* JUEGO */
        #juego { display: none; width: 95%; }
        .sala-tag { color: #ffcc00; font-size: 1.2rem; margin-bottom: 20px; text-align: center; font-weight: bold; }
        .flex-juego { display: flex; justify-content: space-around; gap: 20px; }
        .rosco-box { display: flex; flex-direction: column; align-items: center; width: 450px; }
        
        .rosco-container { position: relative; width: 320px; height: 320px; margin-bottom: 20px; }
        .letra { position: absolute; width: 32px; height: 32px; background: #0044ff; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 14px; border: 1px solid white; }
        .letra.activa { box-shadow: 0 0 15px #ffcc00; border: 2px solid #ffcc00; }
        .letra.correcta { background: #28a745; }
        .letra.incorrecta { background: #dc3545; }

        .panel-pregunta { background: #111b3d; padding: 20px; border-radius: 15px; width: 100%; text-align: center; }
        .input-ans { width: 80%; padding: 12px; margin: 10px 0; border-radius: 8px; border: none; text-align: center; }
        .btns-panel { display: flex; gap: 10px; }
        
        .oculto { display: none; }
    </style>
</head>
<body>

    <h1 class="titulo">PASAPALABRA</h1>

    <div id="m-inicio" class="pantalla">
        <button class="btn btn-local" onclick="irLocal()">LOCAL</button>
        <button class="btn btn-online" onclick="irOnlineMenu()">ONLINE</button>
    </div>

    <div id="m-online" class="pantalla oculto">
        <button class="btn btn-online" onclick="generarYEntrar()">GENERAR CÓDIGO</button>
        <p>— O —</p>
        <input type="text" id="join-cod" class="cod-input" placeholder="Código 6 cifras">
        <button class="btn btn-local" onclick="unirse()">UNIRSE</button>
    </div>

    <div id="juego">
        <div id="info-sala" class="sala-tag"></div>
        <div class="flex-juego">
            <div class="rosco-box">
                <h3 style="color:#2ecc71">JUGADOR 1</h3>
                <div id="rosco1" class="rosco-container"></div>
                <div class="panel-pregunta">
                    <div id="preg1"><b>...</b></div>
                    <input type="text" id="in1" class="input-ans">
                    <div class="btns-panel">
                        <button class="btn btn-local" onclick="comprobar(1)">ENVIAR</button>
                        <button class="btn btn-online" style="background:#f1c40f; color:black" onclick="pasar(1)">PASO</button>
                    </div>
                </div>
            </div>
            <div class="rosco-box">
                <h3 style="color:#3498db">JUGADOR 2</h3>
                <div id="rosco2" class="rosco-container"></div>
                <div class="panel-pregunta">
                    <div id="preg2"><b>...</b></div>
                    <input type="text" id="in2" class="input-ans">
                    <div class="btns-panel">
                        <button class="btn btn-local" onclick="comprobar(2)">ENVIAR</button>
                        <button class="btn btn-online" style="background:#f1c40f; color:black" onclick="pasar(2)">PASO</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // BANCO DE PREGUNTAS ROTATIVO (Varias por letra)
        const pool = {
            "A": [{p:"Relativo a abejas", r:"apícola"}, {p:"Árbol de bellotas", r:"alcornoque"}],
            "B": [{p:"Mide el viento", r:"veleta"}, {p:"Barco de vela", r:"balandra"}],
            "C": [{p:"Cabeza de estado", r:"capital"}, {p:"Transporte grande", r:"camión"}],
            "D": [{p:"Animal marino", r:"delfín"}, {p:"Número 10", r:"diez"}],
            "E": [{p:"Lugar de elefantes", r:"elefantería"}, {p:"De las estrellas", r:"estelar"}],
            "F": [{p:"Luz de barcos", r:"faro"}, {p:"Mover peso", r:"fuerza"}],
            "G": [{p:"Pone huevos", r:"gallina"}, {p:"Felino", r:"gato"}],
            "H": [{p:"Agua sólida", r:"hielo"}, {p:"Hace reír", r:"humorista"}],
            "I": [{p:"Rodeada de agua", r:"isla"}, {p:"Vas a rezar", r:"iglesia"}],
            "J": [{p:"Cuello largo", r:"jirafa"}, {p:"Dicta sentencia", r:"juez"}],
            "L": [{p:"Da leche", r:"vaca"}, {p:"Vende libros", r:"librería"}],
            "M": [{p:"Fruta roja", r:"manzana"}, {p:"Planeta rojo", r:"marte"}],
            "N": [{p:"Cítrico", r:"naranja"}, {p:"Vehículo mar", r:"nave"}],
            "Ñ": [{p:"Pocos años", r:"niño"}, {p:"Madera cortada", r:"leña"}],
            "O": [{p:"Da lana", r:"oveja"}, {p:"Ave grande", r:"avestruz"}],
            "P": [{p:"Tiene teclas", r:"piano"}, {p:"Cría caballo", r:"potro"}],
            "Q": [{p:"Leche cuajada", r:"queso"}, {p:"Pared fina", r:"tabique"}],
            "R": [{p:"Roedor", r:"ratón"}, {p:"Mide tiempo", r:"reloj"}],
            "S": [{p:"Da calor", r:"sol"}, {p:"Para sentarse", r:"silla"}],
            "T": [{p:"Hablar lejos", r:"teléfono"}, {p:"Tiene empleo", r:"trabajador"}],
            "U": [{p:"Da vino", r:"uva"}, {p:"Un solo color", r:"unicolor"}],
            "V": [{p:"Vive al lado", r:"vecino"}, {p:"Mucho calor", r:"verano"}],
            "X": [{p:"Tejido vivo", r:"biopsia"}, {p:"Láminas madera", r:"xilófono"}],
            "Y": [{p:"Barco lujo", r:"yate"}, {p:"Centro huevo", r:"yema"}],
            "Z": [{p:"Cubre el pie", r:"zapato"}, {p:"Animal astuto", r:"zorro"}]
        };

        const abc = Object.keys(pool);
        let j1 = { ind: 0, pregs: [] }, j2 = { ind: 0, pregs: [] };

        function irOnlineMenu() { document.getElementById('m-inicio').classList.add('oculto'); document.getElementById('m-online').classList.remove('oculto'); }
        function irLocal() { iniciar("MODO LOCAL"); }
        function generarYEntrar() { iniciar("SALA: " + Math.floor(100000 + Math.random() * 900000)); }
        function unirse() { let c = document.getElementById('join-cod').value; if(c) iniciar("SALA: " + c); }

        function iniciar(txt) {
            document.getElementById('m-inicio').classList.add('oculto');
            document.getElementById('m-online').classList.add('oculto');
            document.getElementById('juego').style.display = 'block';
            document.getElementById('info-sala').innerText = txt;
            
            // Cargar preguntas aleatorias diferentes para cada uno
            j1.pregs = abc.map(l => ({letra: l, ...pool[l][Math.floor(Math.random()*pool[l].length)]}));
            j2.pregs = abc.map(l => ({letra: l, ...pool[l][Math.floor(Math.random()*pool[l].length)]}));
            
            dibujar(1); dibujar(2);
            upd(1); upd(2);
        }

        function dibujar(n) {
            let cont = document.getElementById('rosco' + n);
            cont.innerHTML = "";
            abc.forEach((l, i) => {
                let d = document.createElement('div');
                d.className = 'letra'; d.id = `L${n}-${i}`; d.innerText = l;
                let ang = (i * 360 / abc.length) - 90;
                let x = 140 * Math.cos(ang * Math.PI / 180);
                let y = 140 * Math.sin(ang * Math.PI / 180);
                d.style.left = `calc(50% + ${x}px - 16px)`; d.style.top = `calc(50% + ${y}px - 16px)`;
                cont.appendChild(d);
            });
        }

        function upd(n) {
            let p = (n === 1) ? j1 : j2;
            let item = p.pregs[p.ind];
            document.getElementById('preg'+n).innerHTML = `<b>CON LA ${item.letra}:</b> ${item.p}`;
            document.querySelectorAll(`#rosco${n} .letra`).forEach(l => l.classList.remove('activa'));
            document.getElementById(`L${n}-${p.ind}`).classList.add('activa');
        }

        function comprobar(n) {
            let p = (n === 1) ? j1 : j2;
            let val = document.getElementById('in'+n).value.toLowerCase().trim();
            let correct = p.pregs[p.ind].r.toLowerCase();
            let el = document.getElementById(`L${n}-${p.ind}`);
            if(val === correct) el.classList.add('correcta'); else el.classList.add('incorrecta');
            document.getElementById('in'+n).value = "";
            p.ind = (p.ind + 1) % abc.length;
            upd(n);
        }

        function pasar(n) {
            let p = (n === 1) ? j1 : j2;
            p.ind = (p.ind + 1) % abc.length;
            upd(n);
        }
    </script>
</body>
</html>
