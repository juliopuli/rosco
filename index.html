<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pasapalabra Pro v9.0</title>

<style>
:root {
--fondo:#050a1f;
--panel:#111b3d;
--oro:#ffcc00;
--verde:#2ecc71;
--rojo:#dc3545;
--azul:#00c6ff;
}

body{
background:var(--fondo);
color:white;
font-family:'Segoe UI',sans-serif;
margin:0;
display:flex;
align-items:center;
justify-content:center;
min-height:100vh;
overflow:hidden;
}

.oculto{display:none!important;}

.pantalla{
text-align:center;
background:var(--panel);
padding:30px;
border-radius:20px;
border:1px solid #2a3a6d;
width:90%;
max-width:420px;
box-shadow:0 0 40px rgba(0,0,0,0.8);
}

input{
width:90%;
padding:12px;
margin:8px 0;
border-radius:8px;
border:none;
text-align:center;
font-size:1rem;
background:#eee;
color:#000;
font-weight:bold;
}

.btn{
width:100%;
padding:14px;
margin:8px 0;
border-radius:10px;
border:none;
font-weight:bold;
cursor:pointer;
text-transform:uppercase;
font-size:0.9rem;
color:white;
transition:0.3s;
}

.btn-green{background:var(--verde);}
.btn-blue{background:var(--azul);color:#000;}
.btn-red{background:var(--rojo);}
.btn-gold{background:var(--oro);color:#000;}

#juego-cont{
display:none;
flex-direction:column;
align-items:center;
justify-content:center;
width:100vw;
height:100vh;
position:fixed;
top:0;
left:0;
background:var(--fondo);
}

.rosco-main{
position:relative;
width:400px;
height:400px;
margin-bottom:20px;
}

.letra{
position:absolute;
width:35px;
height:35px;
background:#0044ff;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-weight:bold;
border:2px solid white;
font-size:0.9rem;
transition:0.3s;
}

.activa{
background:var(--oro);
color:#000;
transform:scale(1.2);
}

.correcta{background:var(--verde)!important;}
.fallada{background:var(--rojo)!important;}

#panel-staff{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:#000c;
display:flex;
align-items:center;
justify-content:center;
z-index:2000;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="p-login" class="pantalla">
<h1 style="color:var(--oro)">PASAPALABRA</h1>
<input type="text" id="user-name" placeholder="Usuario">
<input type="password" id="user-pass" placeholder="Contraseña (si eres staff)">
<button class="btn btn-green" onclick="login()">ENTRAR</button>
</div>

<!-- MENÚ -->
<div id="p-menu" class="pantalla oculto">
<h2 id="saludo">HOLA</h2>
<button class="btn btn-blue" onclick="irJuego()">JUGAR</button>
<button class="btn btn-red" onclick="logout()">CERRAR SESIÓN</button>
</div>

<!-- JUEGO -->
<div id="juego-cont">
<div class="rosco-main" id="rosco-box"></div>

<div class="pantalla">
<h3 id="h-letra" style="color:var(--oro)">CON LA A</h3>
<p id="p-def">Definición...</p>
<input type="text" id="r-text" placeholder="Respuesta">
<button class="btn btn-green" onclick="validar()">ENVIAR</button>
<button class="btn btn-gold" onclick="pasapalabra()">PASAR</button>
</div>
</div>

<script>

/* =======================
   CONFIGURACIÓN STAFF
======================= */

const STAFF = {
  "pablo": { pass:"Pablo23sek", rol:"superadmin" },
  "juliopuli": { pass:"juli26", rol:"admin" },
  "alvarito": { pass:"poki", rol:"visualizador" }
};

let usuarioActual = null;
let rolActual = "jugador";

/* =======================
   LOGIN
======================= */

function login(){
  const user = document.getElementById("user-name").value.trim().toLowerCase();
  const pass = document.getElementById("user-pass").value.trim();

  if(STAFF[user]){
    if(pass === STAFF[user].pass){
      usuarioActual = user;
      rolActual = STAFF[user].rol;
      mostrarPanelStaff();
      return;
    } else {
      alert("Contraseña incorrecta");
      return;
    }
  }

  if(user){
    usuarioActual = user;
    rolActual = "jugador";
    guardarUsuarioConectado(user);
    irMenu();
  }
}

function logout(){
  location.reload();
}

/* =======================
   PANEL STAFF
======================= */

function mostrarPanelStaff(){
  document.getElementById("p-login").classList.add("oculto");

  const panel = document.createElement("div");
  panel.id = "panel-staff";

  let botones = `
  <div class="pantalla">
  <h2>PANEL ${rolActual.toUpperCase()}</h2>
  <p>Usuario: ${usuarioActual}</p>
  <button class="btn btn-blue" onclick="verUsuarios()">VER USUARIOS CONECTADOS</button>
  `;

  if(rolActual === "superadmin"){
    botones += `<button class="btn btn-red" onclick="apagarJuego()">APAGAR JUEGO</button>`;
  }

  botones += `<button class="btn btn-green" onclick="logout()">CERRAR SESIÓN</button>
  </div>`;

  panel.innerHTML = botones;
  document.body.appendChild(panel);
}

function verUsuarios(){
  const lista = JSON.parse(localStorage.getItem("usuariosConectados") || "[]");
  alert("Usuarios conectados:\n\n" + (lista.join("\n") || "Nadie conectado"));
}

function apagarJuego(){
  document.body.innerHTML = `
  <div style="display:flex;align-items:center;justify-content:center;height:100vh;background:black;color:red;font-size:2rem;">
  EL JUEGO HA SIDO APAGADO POR EL SUPERADMIN
  </div>`;
}

/* =======================
   CONTROL USUARIOS
======================= */

function guardarUsuarioConectado(nombre){
  let lista = JSON.parse(localStorage.getItem("usuariosConectados") || "[]");
  if(!lista.includes(nombre)){
    lista.push(nombre);
    localStorage.setItem("usuariosConectados", JSON.stringify(lista));
  }
}

/* =======================
   JUEGO
======================= */

const preguntas = [
{ l:"A", d:"Empieza por A: Persona que viaja al espacio.", r:"astronauta" },
{ l:"B", d:"Empieza por B: Deporte con canasta.", r:"baloncesto" },
{ l:"C", d:"Empieza por C: Vehículo de cuatro ruedas.", r:"coche" }
];

let i = 0;

function irMenu(){
  document.getElementById("p-login").classList.add("oculto");
  document.getElementById("p-menu").classList.remove("oculto");
  document.getElementById("saludo").innerText = "HOLA, " + usuarioActual.toUpperCase();
}

function irJuego(){
  document.getElementById("p-menu").classList.add("oculto");
  document.getElementById("juego-cont").style.display="flex";
  pintarRosco();
  cargarPregunta();
}

function pintarRosco(){
  const box=document.getElementById("rosco-box");
  box.innerHTML="";
  const abc="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ".split("");
  abc.forEach((l,idx)=>{
    const d=document.createElement("div");
    d.className="letra";
    d.id="L-"+l;
    d.innerText=l;
    const r=(idx*(360/27)-90)*(Math.PI/180);
    d.style.left=`calc(50% + ${Math.cos(r)*175}px - 17px)`;
    d.style.top=`calc(50% + ${Math.sin(r)*175}px - 17px)`;
    box.appendChild(d);
  });
}

function cargarPregunta(){
  if(i>=preguntas.length){
    alert("Has terminado el juego");
    return;
  }
  const p=preguntas[i];
  document.getElementById("h-letra").innerText="CON LA "+p.l;
  document.getElementById("p-def").innerText=p.d;
}

function validar(){
  const res=document.getElementById("r-text").value.toLowerCase().trim();
  const correcta=preguntas[i].r;
  const div=document.getElementById("L-"+preguntas[i].l);

  if(res===correcta){
    div.classList.add("correcta");
  } else {
    div.classList.add("fallada");
  }

  i++;
  document.getElementById("r-text").value="";
  cargarPregunta();
}

function pasapalabra(){
  i++;
  cargarPregunta();
}

</script>
</body>
</html>
